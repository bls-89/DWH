Слой raw будет содержать необработанные данные, которые поступают непосредственно из источников данных. Это будут таблицы Продажи, Личные кабинеты и Промо-акции.

Слой core будет содержать обработанные и структурированные данные. Здесь данные будут очищены от ошибок, дубликатов и пропусков. Будут созданы таблицы Клиенты, Товары, Продажи и Промо-акции.

Слой mart будет содержать агрегированные данные, которые удобны для анализа и отчетности. Здесь будет создана таблица Аналитика продаж, которая будет содержать всю необходимую информацию для формирования целевой аудитории.

Вот примерная ER-диаграмма DWH:

RAW LAYER
---------
Продажи (id заказа, время продажи, название товара, цена, бренд, модель товара, категория, cookies покупателя, сумма)
Личные кабинеты (id личного кабинета, cookies покупателя, ФИО, пол, дата рождения, email, телефон)
Промо-акции (id промо-акции, id товара, дата начала промо, дата окончания промо, размер скидки)

CORE LAYER
----------
Клиенты (id клиента, id личного кабинета, ФИО, пол, дата рождения, email, телефон)
Товары (id товара, название товара, цена, бренд, модель товара, категория)
Продажи (id продажи, id клиента, id товара, время продажи, сумма)
Промо-акции (id промо-акции, id товара, дата начала промо, дата окончания промо, размер скидки)

MART LAYER
----------
Аналитика продаж (id клиента, пол, категория возраста, email, телефон, товар, который чаще всего покупал клиент за последний месяц, бренд и категория товаров, которые чаще всего покупал клиент, сумма, потраченная клиентом за месяц, количество товаров, купленных со скидкой,месяц, квартал, год))